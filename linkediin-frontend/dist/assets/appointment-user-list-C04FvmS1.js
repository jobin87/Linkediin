import{ab as C,a as S,b as v,ap as y,r,ar as w,j as e,ac as D,x as A,B as I,T as s,as as k,a3 as h,m as W,at as M,n as F,p as O,H as T,C as E}from"./index-B_-NbAO2.js";import{S as H}from"./Snackbar-ByLoftDz.js";function N(){var m;const{role:i}=C(),l=S(),x=v(),{data:n,loading:u}=y(t=>t.appointment.appointmentData),[c,g]=r.useState("");r.useEffect(()=>{(!n||Array.isArray(n.appointments)&&n.appointments.length===0)&&l(w({}))},[l,(m=n==null?void 0:n.appointments)==null?void 0:m.length]);const d=Array.isArray(n==null?void 0:n.appointments)?n.appointments:[],f=d.reduce((t,a)=>(t[a.department]||(t[a.department]={department:a.department,count:0}),t[a.department].count+=1,t),{}),p=Object.values(f).filter(t=>t.department.toLowerCase().includes(c.toLowerCase())),b=t=>{x(`${O.dashboard.Appointment.department.replace(":id",t)}`)},[j,o]=r.useState(!1);return r.useEffect(()=>{const t=sessionStorage.getItem("welcomeMessageShown");console.log("Welcome Message Status:",sessionStorage.getItem("welcomeMessageShown")),i==="Doctor"&&!t&&(o(!0),sessionStorage.setItem("welcomeMessageShown","true"))},[i]),e.jsxs(D,{children:[e.jsx(H,{open:j,autoHideDuration:2e3,onClose:()=>o(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(A,{onClose:()=>o(!1),severity:"success",variant:"filled",children:"🎉 Welcome to the Dashboard!"})}),u?e.jsx(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",width:"100%"},children:e.jsx(s,{variant:"h6",children:"Fetching appointments... ⏳"})}):e.jsxs(e.Fragment,{children:[e.jsxs(s,{variant:"h6",sx:{mb:2},children:["Total Appointments: ",d.length]}),e.jsx(k,{label:"Search Department",variant:"outlined",value:c,onChange:t=>g(t.target.value),sx:{mb:3,width:"100%","& .MuiOutlinedInput-root":{borderWidth:"2px","& fieldset":{borderColor:"grey",borderWidth:"2px"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black",borderWidth:"2.5px"}}}}),e.jsx(h,{container:!0,spacing:3,children:p.length>0?p.map(t=>e.jsx(h,{item:!0,xs:6,sm:6,md:2,children:e.jsx(W,{sx:{width:"100%",minHeight:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",boxShadow:3,borderRadius:2,transition:"transform 0.2s ease-in",border:"2px solid",borderColor:"gainsboro","&:hover":{transform:"scale(1.11)",borderColor:"GrayText"}},children:e.jsxs(M,{sx:{padding:"8px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(s,{variant:"h6",sx:{fontWeight:"bold"},children:t.department}),e.jsx(s,{variant:"body2",sx:{color:"gray"},children:t.count}),e.jsx(F,{variant:"contained",color:"primary",size:"small",sx:{mt:1},onClick:()=>b(t.department),children:"View"})]})})},t.department)):e.jsx(s,{sx:{mt:2,ml:3},children:"No appointments found."})})]})]})}const B={title:`All Staff | Staff | Settings - ${E.appName}`};function R(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsxs("title",{children:[" ",B.title]})}),e.jsx(N,{})]})}export{R as default};
