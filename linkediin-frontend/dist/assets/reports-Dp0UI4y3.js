import{b as m,a as j,ap as f,r as u,aM as b,j as e,B as C,T as n,ac as y,a3 as d,m as A,at as T,n as w,a5 as v,a4 as R,a6 as D,a7 as k,a8 as c,a9 as a,aa as F,p as N,H as S,C as W}from"./index-B_-NbAO2.js";function B(){const h=m(),i=j(),{data:r,loading:x}=f(s=>s.report.reportDetails)||{data:[]};console.log("datederer",r),u.useEffect(()=>{(!r||r.length===0)&&i(b({}))},[i,r]);const o=(r??[]).flatMap(s=>s.reports.filter(t=>t.isAssigned)).sort((s,t)=>new Date(t.updatedAt).getTime()-new Date(s.updatedAt).getTime()),l=(r??[]).map(s=>({...s,reports:s.reports.filter(t=>!t.isAssigned).sort((t,g)=>new Date(t.createdAt).getTime()-new Date(g.createdAt).getTime())})).filter(s=>s.reports.length>0),p=s=>{h(`${N.dashboard.Reports.details.replace(":id",s)}`)};return x?e.jsx(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(n,{children:"Fetching reports... â³"})}):e.jsxs(y,{children:[e.jsxs(n,{variant:"h6",sx:{mb:2},children:["Total Reports:"," ",(r&&Array.isArray(r)?r:[]).reduce((s,t)=>s+(t.count||0),0)]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"h6",sx:{mb:2},children:"Unassigned Reports"}),e.jsx(d,{container:!0,spacing:2,children:l.map((s,t)=>e.jsx(d,{item:!0,xs:6,sm:6,md:3,lg:2.7,children:e.jsxs(A,{sx:{textAlign:"center",height:120,display:"flex",flexDirection:"column",justifyContent:"space-between",p:1},children:[e.jsxs(T,{sx:{pb:0},children:[e.jsx(n,{variant:"subtitle2",sx:{fontWeight:"bold",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",textAlign:"center"},children:s._id}),e.jsxs(n,{variant:"body2",sx:{color:"gray",fontSize:"0.75rem"},children:[s.reports.length," Reports"]})]}),e.jsx(w,{variant:"contained",color:"primary",onClick:()=>p(s._id),sx:{fontSize:"0.75rem",py:.5,px:1.5,mt:1,width:"auto",display:"block",margin:"0 auto",border:"2px solid gainsboro",transition:"transform 0.2s ease-in","&:hover":{transform:"scale(1.02)",borderColor:"GrayText"}},children:"View"})]})},t))})]}),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"h6",sx:{mt:4,mb:2},children:"Assigned Reports"}),e.jsx(v,{component:R,children:e.jsxs(D,{children:[e.jsx(k,{children:e.jsxs(c,{children:[e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Category"}),e.jsx(a,{children:"Room No"}),e.jsx(a,{children:"Assigned Worker"})]})}),e.jsx(F,{children:o.map((s,t)=>e.jsxs(c,{children:[e.jsx(a,{children:s.description}),e.jsx(a,{children:s.category}),e.jsx(a,{children:s.roomNo}),e.jsx(a,{children:e.jsx(n,{sx:{fontWeight:"bold",color:"green"},children:s.assignedWorker})})]},t))})]})})]})]})}const z={title:`Reports- ${W.appName}`};function G(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx(B,{})]})}export{G as default};
