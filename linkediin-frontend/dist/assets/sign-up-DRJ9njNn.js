import{z as r,i as k,r as h,k as D,a as E,c as U,t as z,l as H,V as x,j as s,h as V,m as M,B as m,F as d,U as A,M as L,S as y,g as v,D as Z,T as S,n as B,p as q,L as f,R as G,H as W,C as O}from"./index-B_-NbAO2.js";import{F as $}from"./form-head-CvRrJCcn.js";const Y={phoneNumber:e=>{var a,i,t,n;return r.string({required_error:((a=e==null?void 0:e.message)==null?void 0:a.required_error)??"Phone number is required!",invalid_type_error:((i=e==null?void 0:e.message)==null?void 0:i.invalid_type_error)??"Invalid phone number!"}).min(1,{message:((t=e==null?void 0:e.message)==null?void 0:t.required_error)??"Phone number is required!"}).refine(l=>{var c;return(c=e==null?void 0:e.isValidPhoneNumber)==null?void 0:c.call(e,l)},{message:((n=e==null?void 0:e.message)==null?void 0:n.invalid_type_error)??"Invalid phone number!"})},date:e=>r.coerce.date().nullable().transform((a,i)=>{var l,c;const t=k(a).format(),n=r.string().pipe(r.coerce.date());return a?(n.safeParse(t).success||i.addIssue({code:r.ZodIssueCode.invalid_date,message:((c=e==null?void 0:e.message)==null?void 0:c.invalid_type_error)??"Invalid Date!!"}),t):(i.addIssue({code:r.ZodIssueCode.custom,message:((l=e==null?void 0:e.message)==null?void 0:l.required_error)??"Date is required!"}),null)}).pipe(r.union([r.number(),r.string(),r.date(),r.null()])),editor:e=>{var a;return r.string().min(8,{message:((a=e==null?void 0:e.message)==null?void 0:a.required_error)??"Editor is required!"})},objectOrNull:e=>{var a;return r.custom().refine(i=>i!==null&&i!=="",{message:((a=e==null?void 0:e.message)==null?void 0:a.required_error)??"Field is required!"})},boolean:e=>{var a;return r.coerce.boolean().refine(i=>i===!0,{message:((a=e==null?void 0:e.message)==null?void 0:a.required_error)??"Switch is required!"})},file:e=>r.custom().transform((a,i)=>{var n;return a instanceof File||typeof a=="string"&&!!a.length?a:(i.addIssue({code:r.ZodIssueCode.custom,message:((n=e==null?void 0:e.message)==null?void 0:n.required_error)??"File is required!"}),null)}),files:e=>r.array(r.custom()).transform((a,i)=>{var n;const t=(e==null?void 0:e.minFiles)??2;return a.length?a.length<t&&i.addIssue({code:r.ZodIssueCode.custom,message:`Must have at least ${t} items!`}):i.addIssue({code:r.ZodIssueCode.custom,message:((n=e==null?void 0:e.message)==null?void 0:n.required_error)??"Files is required!"}),a})},J=r.object({userName:r.string().min(1,{message:"Name is required!"}),userEmail:r.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),userRegNum:r.string().min(1,{message:"Cannot leave this field empty!"}),role:Y.objectOrNull({message:{required_error:"Type is required!"}}),department:r.string().min(1,{message:"department is required!"}),specialization:r.string().min(1,{message:"specialization is required!"}),zipCode:r.string().regex(/^[1-9][0-9]{5}$/,{message:"invalid zipcode"}),password:r.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function K(){const[e,a]=h.useState(!1),[i,t]=h.useState("Select User Type"),[n,l]=h.useState("Select User Type"),c=D(),I=E(),N={userName:"",department:"",specialization:"",userEmail:"",userRegNum:"",role:"Manager",address:"",password:"",zipcode:""},g=U({mode:"onSubmit",resolver:z(J),defaultValues:N}),F=!1,{reset:R,watch:_,handleSubmit:w,formState:{isSubmitting:T,errors:C}}=g;console.log(C);const b=_();h.useEffect(()=>{switch(b.role){case"Doctor":t("Doctor ID"),l("Doctor Name");break;case"Manager":t("Hospital Registration Number"),l("Manager Name");break;case"Nurse":t("Nurse ID"),l("Nurse Name");break;default:t("Hospital Registration Number"),l("Manager Name");break}},[b.role]);const j=w(async()=>{const o=g.getValues();try{const u=await I(H(o)).unwrap();console.log(u),(u==null?void 0:u.userWithRoleRequested)===!0?(console.log("1"),x.success("Registration completed successfully"),a(!0),R()):x.error("Sign Up Failed")}catch(u){console.error(u),x.error("An error occurred during sign up.")}}),P=async()=>{};return s.jsxs(s.Fragment,{children:[s.jsx(V,{methods:g,onSubmit:j,children:s.jsxs(M,{sx:{p:3,boxShadow:0},elevation:0,children:[s.jsxs(m,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[s.jsx(d.Select,{fullWidth:!0,name:"role",label:"Role",children:A.map(o=>s.jsx(L,{value:o.value,children:o.label},o.value)),defaultValue:"Manager"}),s.jsx(d.Text,{name:"userName",label:n}),s.jsx(d.Text,{name:"department",label:"department"}),s.jsx(d.Text,{name:"specialization",label:"specialization"}),s.jsx(d.Text,{name:"userRegNum",label:i}),s.jsx(d.Text,{...g.register,name:"zipCode",label:"ZipCode"}),s.jsx(d.Text,{name:"userEmail",label:"Email address"}),s.jsx(d.Text,{name:"password",label:"Password",placeholder:"6+ characters",InputLabelProps:{shrink:!0}})]}),s.jsx(y,{alignItems:"flex-center",sx:{mt:3},flex:1,children:s.jsx(v,{type:"submit",onClick:j,variant:"contained",loading:T,sx:{py:1.5},children:"Register"})})]})}),s.jsx(Z,{open:e,children:s.jsx(m,{px:3,pt:2,pb:2.5,children:s.jsxs(y,{spacing:2,children:[s.jsx(S,{variant:"h4",children:"Registration Successful"}),s.jsx(S,{variant:"body1",children:"A verification email has been sent to your email address. Please verify to continue."}),s.jsx(v,{variant:"outlined",onClick:P,loading:F,children:"Resend Verification Email"}),s.jsx(m,{textAlign:"right",children:s.jsx(B,{onClick:()=>{a(!1),c.push(q.auth.signIn)},variant:"contained",children:"Return to Sign In"})})]})})})]})}function Q({sx:e,...a}){return s.jsxs(m,{component:"span",sx:{mt:0,display:"block",textAlign:"center",typography:"caption",color:"text.secondary",...e},...a,children:["By signing up, I agree to ",s.jsx(f,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",s.jsx(f,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]})}function X(){return s.jsxs(s.Fragment,{children:[s.jsx($,{title:"Get started absolutely free",description:s.jsxs(s.Fragment,{children:["Already have an account? ",s.jsx(f,{component:G,href:q.auth.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),s.jsx(m,{gap:3,display:"flex",flexDirection:"column",minWidth:{md:600},maxWidth:600,children:s.jsx(K,{})}),s.jsx(Q,{})]})}const p={title:`Sign up | ${O.appName}`};function ae(){return s.jsxs(s.Fragment,{children:[s.jsx(W,{children:s.jsxs("title",{children:[" ",p.title]})}),s.jsx(X,{})]})}export{ae as default};
